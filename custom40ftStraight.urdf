<?xml version="1.0" ?>
<robot name="roller_conveyor_40ft">
    <!-- Base Frame -->
    <link name="base_link">
        <visual>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <geometry>
                <box size="12.192 1.219 0.1"/>
            </geometry>
            <material name="gray">
                <color rgba="0.6 0.6 0.6 1.0"/>
            </material>
        </visual>
        <collision>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <geometry>
                <box size="12.192 1.219 0.1"/>
            </geometry>
        </collision>
        <inertial>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <mass value="20.0"/>
            <inertia ixx="0.2" iyy="0.2" izz="0.2"/>
        </inertial>
    </link>

    <!-- Left Guide Frame-->
    <link name="leftFrame">
        <visual>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <geometry>
                <box size="12.192 0.05 0.5"/>
            </geometry>
            <material name="gray">
                <color rgba="0.6 0.6 0.6 1.0"/>
            </material>
        </visual>
        <collision>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <geometry>
                <box size="12.192 0.05 0.5"/>
            </geometry>
        </collision>
        <inertial>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <mass value="20.0"/>
            <inertia ixx="0.2" iyy="0.2" izz="0.2"/>
        </inertial>
    </link>
    <joint name="leftFrameJoint" type="fixed">
        <parent link="base_link"/>
        <child link="leftFrame"/>
        <origin xyz="0 -0.63 0.2" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
    </joint>

    <!-- Right Guide Frame-->
    <link name="rightFrame">
        <visual>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <geometry>
                <box size="12.192 0.05 0.5"/>
            </geometry>
            <material name="gray">
                <color rgba="0.6 0.6 0.6 1.0"/>
            </material>
        </visual>
        <collision>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <geometry>
                <box size="12.192 0.05 0.5"/>
            </geometry>
        </collision>
        <inertial>
            <origin xyz="-6.096 0 0" rpy="0 0 0" />
            <mass value="20.0"/>
            <inertia ixx="0.2" iyy="0.2" izz="0.2"/>
        </inertial>
    </link>
    <joint name="rightFrameJoint" type="fixed">
        <parent link="base_link"/>
        <child link="rightFrame"/>
        <origin xyz="0 0.63 0.2" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
    </joint>


    <!-- Rollers -->
    <!-- 56 Rollers, Spacing = 12.192m / 56 spaces ≈ 0.2177m apart -->

    <!-- Define 14 Rollers -->
    <!-- Roller Diameter = 50.8mm (0.0508m), Length = 4ft (1.219m) -->
    
    <!-- Rollers List -->
    <!-- Each roller has a continuous joint allowing unlimited rotation -->
    
    <!-- Looping manually without macros -->

    <!-- 14 Rollers Definition -->
    <!-- Index i ∈ [0, 13], Position Y = -0.762 + i * 0.117m -->
    
    <!-- Roller Definition Loop -->
    <!-- Define 14 rollers manually -->

    <!-- Start Roller Definitions -->
    <!-- Roller 1 -->
    <link name="roller_1"><visual><geometry><cylinder radius="0.025" length="1.219"/></geometry></visual>
        <collision>
            <geometry>
                <cylinder radius="0.025" length="1.219"/>
            </geometry>
        </collision>
        <inertial>
            <mass value="2.0"/>
            <inertia ixx="0.02" iyy="0.02" izz="0.02"/>
        </inertial>
    </link>

    <joint name="roller_1_joint" type="continuous">
        <parent link="base_link"/>
        <child link="roller_1"/>
        <origin xyz="-0.1089 0 0.15" rpy="1.570796 0 0"/>
        <axis xyz="0 0 1"/>
        <dynamics damping="0.1" friction="0.2"/>
    </joint>

    <xacro:macro name="roller" params="name pos_y">
        <link name="${name}">
            <visual>
                <geometry>
                    <cylinder radius="0.05" length="1.524"/>
                </geometry>
                <material name="black">
                    <color rgba="0.1 0.1 0.1 1.0"/>
                </material>
            </visual>
            <collision>
                <geometry>
                    <cylinder radius="0.05" length="1.524"/>
                </geometry>
            </collision>
            <inertial>
                <mass value="2.0"/>
                <inertia ixx="0.02" iyy="0.02" izz="0.02"/>
            </inertial>
        </link>

        <joint name="${name}_joint" type="continuous">
            <parent link="base_link"/>
            <child link="${name}"/>
            <origin xyz="0 ${pos_y} 0.15" rpy="0 0 0"/>
            <axis xyz="1 0 0"/>
            <dynamics damping="0.1" friction="0.2"/>
        </joint>
    </xacro:macro>

    <!-- Instantiate Rollers -->
    <xacro:roller name="roller_2" pos_y="-0.45"/>
    <xacro:roller name="roller_3" pos_y="-0.3"/>
    <xacro:roller name="roller_4" pos_y="-0.15"/>
    <xacro:roller name="roller_5" pos_y="0.0"/>
    <xacro:roller name="roller_6" pos_y="0.15"/>
    <xacro:roller name="roller_7" pos_y="0.3"/>
    <xacro:roller name="roller_8" pos_y="0.45"/>
    <xacro:roller name="roller_9" pos_y="0.6"/>

    

</robot>
